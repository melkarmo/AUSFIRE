<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <style>
    body { margin:0;position:fixed;top:0;right:0;bottom:0;left:0; }
  </style>
</head>

<body>
  
  <div id="grid"></div>
  
  <script>

var svg = d3.select("#grid")
.append("svg")
.attr("width", 960)
.attr("height", 500)

var states = [
    {
        name: 'Northern Territory', postal: 'NT',
        x: 20, y: 20, w: 5, h: 5, nb_div: 20,
        area: 1419630.0, forest1: 42588.9, forest2: 237000.0
    },
    {
        name: 'Queensland', postal: 'QLD',
        x: 20 + 120, y: 20, w: 5, h: 5, nb_div: 20,
        area: 1851736.0, forest1: 370347.2, forest2: 518000.0
    },
    {
        name: 'South Australia', postal: 'SA',
        x: 20 + 2*120, y: 20, w: 5, h: 5, nb_div: 20,
        area: 1044353.0, forest1: 31330.59, forest2: 51000.0
    },
    {
        name: 'Tasmania', postal: 'TAS',
        x: 20 + 3*120, y: 20, w: 5, h: 5, nb_div: 20,
        area: 90758.0, forest1: 58992.7, forest2: 37000.0
    },
    {
        name: 'Victoria', postal: 'VIC',
        x: 20 + 4*120, y: 20, w: 5, h: 5, nb_div: 20,
        area: 237657.0, forest1: 83179.95, forest2: 82000.0
    },
    {
        name: 'Western Australia', postal: 'WA',
        x: 20 + 5*120, y: 20, w: 5, h: 5, nb_div: 20,
        area: 2642753.0, forest1: 52855.06, forest2: 210000.0
    },
    {
        name: 'New South Wales', postal: 'NSW',
        x: 20 + 6*120, y: 20, w: 5, h: 5, nb_div: 20,
        area: 812310.0, forest1: 97477.2, forest2: 205400.0
    }
]

function gridData(x,y,w,h,nb_div,postal) {
    var data = new Array();
    var xpos = x; var ypos = y; var width = w; var height = h;
    var compteur = 0
    for (var row = 0; row < nb_div; row++) {
        for (var column = 0; column < nb_div; column++) {
            compteur = compteur + 1;
            data.push({
                x: xpos,
                y: ypos,
                width: width,
                height: height,
                name: postal + '_' + compteur
            })
            xpos += width;
        }
        xpos = x;
        ypos += height; 
    }
    return data;
}

function initial_draw() {

    states.forEach(function(elt) {

        var gridData = new Array();
        var xpos = elt.x; var ypos = elt.y; var width = elt.w;
        var height = elt.h; var nb_div = elt.nb_div; var postal = elt.postal;
        var compteur = 0
        for (var row = 0; row < nb_div; row++) {
            for (var column = 0; column < nb_div; column++) {
                compteur = compteur + 1;
                gridData.push({
                    x: xpos,
                    y: ypos,
                    width: width,
                    height: height,
                    name: postal + '_' + compteur
                })
                xpos += width;
            }
            xpos = elt.x;
            ypos += height; 
        }

        svg.selectAll()
        .data(gridData)
        .enter()
        .append("rect")
        .attr("class", function(d) { return d.name; })
        .attr("x", function(d) { return d.x; })
        .attr("y", function(d) { return d.y; })
        .attr("width", function(d) { return d.width; })
        .attr("height", function(d) { return d.height; })
        .style("fill", "#fff")
        .style("stroke", "#222");

    })
}

initial_draw();

  </script>
</body>
